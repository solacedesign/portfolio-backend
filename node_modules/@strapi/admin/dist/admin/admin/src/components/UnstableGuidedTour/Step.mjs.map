{"version":3,"file":"Step.mjs","sources":["../../../../../../admin/src/components/UnstableGuidedTour/Step.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { Popover, Box, Flex, Button, Typography, LinkButton } from '@strapi/design-system';\nimport { FormattedMessage, type MessageDescriptor } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\nimport { styled } from 'styled-components';\n\nimport { unstableUseGuidedTour, ValidTourName } from './Context';\n\n/* -------------------------------------------------------------------------------------------------\n * Step factory\n * -----------------------------------------------------------------------------------------------*/\n\ntype WithChildren = {\n  children: React.ReactNode;\n  id?: never;\n  defaultMessage?: never;\n};\n\ntype WithIntl = {\n  children?: undefined;\n  id: MessageDescriptor['id'];\n  defaultMessage: MessageDescriptor['defaultMessage'];\n};\n\ntype WithActionsChildren = {\n  children: React.ReactNode;\n  showStepCount?: boolean;\n  showSkip?: boolean;\n};\n\ntype WithActionsProps = {\n  children?: undefined;\n  showStepCount?: boolean;\n  showSkip?: boolean;\n};\n\ntype StepProps = WithChildren | WithIntl;\ntype ActionsProps = WithActionsChildren | WithActionsProps;\n\ntype Step = {\n  Root: React.ForwardRefExoticComponent<React.ComponentProps<typeof Popover.Content>>;\n  Title: (props: StepProps) => React.ReactNode;\n  Content: (props: StepProps) => React.ReactNode;\n  Actions: (props: ActionsProps & { to?: string }) => React.ReactNode;\n};\n\nconst ActionsContainer = styled(Flex)`\n  border-top: ${({ theme }) => `1px solid ${theme.colors.neutral150}`};\n`;\n\nconst createStepComponents = (tourName: ValidTourName): Step => ({\n  Root: React.forwardRef((props, ref) => (\n    <Popover.Content ref={ref} side=\"top\" align=\"center\" style={{ border: 'none' }} {...props}>\n      <Flex width=\"360px\" direction=\"column\" alignItems=\"start\">\n        {props.children}\n      </Flex>\n    </Popover.Content>\n  )),\n\n  Title: (props) => {\n    return (\n      <Box paddingTop={5} paddingLeft={5} paddingRight={5} paddingBottom={1} width=\"100%\">\n        {'children' in props ? (\n          props.children\n        ) : (\n          <Typography tag=\"div\" variant=\"omega\" fontWeight=\"bold\">\n            <FormattedMessage tagName=\"h1\" id={props.id} defaultMessage={props.defaultMessage} />\n          </Typography>\n        )}\n      </Box>\n    );\n  },\n\n  Content: (props) => (\n    <Box paddingBottom={5} paddingLeft={5} paddingRight={5} width=\"100%\">\n      {'children' in props ? (\n        props.children\n      ) : (\n        <Typography tag=\"div\" variant=\"omega\">\n          <FormattedMessage tagName=\"p\" id={props.id} defaultMessage={props.defaultMessage} />\n        </Typography>\n      )}\n    </Box>\n  ),\n\n  Actions: ({ showStepCount = true, showSkip = false, to, ...props }) => {\n    const dispatch = unstableUseGuidedTour('GuidedTourPopover', (s) => s.dispatch);\n    const state = unstableUseGuidedTour('GuidedTourPopover', (s) => s.state);\n    const currentStep = state.tours[tourName].currentStep + 1;\n    // TODO: Currently all tours do not count their last step, but we should find a way to make this more smart\n    const displayedLength = state.tours[tourName].length - 1;\n\n    return (\n      <ActionsContainer width=\"100%\" padding={3} paddingLeft={5}>\n        {'children' in props ? (\n          props.children\n        ) : (\n          <Flex flex={1} justifyContent={showStepCount ? 'space-between' : 'flex-end'}>\n            {showStepCount && (\n              <Typography variant=\"omega\" fontSize=\"12px\">\n                <FormattedMessage\n                  id=\"tours.stepCount\"\n                  defaultMessage=\"Step {currentStep} of {tourLength}\"\n                  values={{ currentStep, tourLength: displayedLength }}\n                />\n              </Typography>\n            )}\n            <Flex gap={2}>\n              {showSkip && (\n                <Button\n                  variant=\"tertiary\"\n                  onClick={() => dispatch({ type: 'skip_tour', payload: tourName })}\n                >\n                  <FormattedMessage id=\"tours.skip\" defaultMessage=\"Skip\" />\n                </Button>\n              )}\n              {to ? (\n                <LinkButton\n                  tag={NavLink}\n                  to={to}\n                  onClick={() => dispatch({ type: 'next_step', payload: tourName })}\n                >\n                  <FormattedMessage id=\"tours.next\" defaultMessage=\"Next\" />\n                </LinkButton>\n              ) : (\n                <Button onClick={() => dispatch({ type: 'next_step', payload: tourName })}>\n                  <FormattedMessage id=\"tours.next\" defaultMessage=\"Next\" />\n                </Button>\n              )}\n            </Flex>\n          </Flex>\n        )}\n      </ActionsContainer>\n    );\n  },\n});\n\nexport type { Step };\nexport { createStepComponents };\n"],"names":["ActionsContainer","styled","Flex","theme","colors","neutral150","createStepComponents","tourName","Root","React","forwardRef","props","ref","_jsx","Popover","Content","side","align","style","border","width","direction","alignItems","children","Title","Box","paddingTop","paddingLeft","paddingRight","paddingBottom","Typography","tag","variant","fontWeight","FormattedMessage","tagName","id","defaultMessage","Actions","showStepCount","showSkip","to","dispatch","unstableUseGuidedTour","s","state","currentStep","tours","displayedLength","length","padding","_jsxs","flex","justifyContent","fontSize","values","tourLength","gap","Button","onClick","type","payload","LinkButton","NavLink"],"mappings":"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"}